<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<!-- NOTE TO SELF
    KEEP THE SCRIPT BELOW BODY
    ELSE SCRIPT WILL RUN FIRST AND IT WONT FIND THE buttonParent div and wont work


-->
<body>
    <div id="buttonParent">

    </div>
</body>

<script>
    let state = {
        count: 0,
        color: "red"
    }

    function onButtonPress(){
        state.count++
        state.color = Math.random()>0.55? "red":"green"
        buttonComponentRerender()
    }

    function buttonComponentRerender(){
        document.getElementById("buttonParent").innerHTML = "";
        const button = document.createElement("button")
        button.innerHTML = `Counter ${state.count}`
        button.setAttribute("onclick",`onButtonPress()`)
        button.setAttribute("style","color: "+state.color)
        document.getElementById("buttonParent").appendChild(button)
    }
    buttonComponentRerender()
</script>
</html>